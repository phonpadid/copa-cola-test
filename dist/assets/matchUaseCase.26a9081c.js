import{g as l,a as h,d as _,c as u,u as d}from"./MatchRepository.b2ec5901.js";import{B as f,r as p,b as g,t as y,D as i,v as r}from"./index.5d8a84cb.js";import{n as s,a as o}from"./message.f33fb752.js";function b(){f.call(this),this.team_a=null,this.team_b=null,this.match_time=null,this.match_end_activity_time=null,this.is_enable=!0,this.fromJSON=(a,t)=>{a.team_a=t.team_a,a.team_b=t.team_b,a.match_time=t.match_time,a.match_end_activity_time=t.match_end_activity_time,a.is_enable=t.is_enable}}const e=p({isEdit:!1,matches:[],form:new b,messageError:{},isServerError:!1,rules:{team_a:[{required:!0,message:["\u0E81\u0EB0\u0EA5\u0EB8\u0E99\u0EB2\u0E9B\u0EC9\u0EAD\u0E99\u0EC0\u0EA5\u0EB7\u0EAD\u0E81\u0E97\u0EB5\u0EA1\u0E81\u0EC8\u0EAD\u0E99"]}],team_b:[{required:!0,message:["\u0E81\u0EB0\u0EA5\u0E96\u0E99\u0EB2\u0EC0\u0EA5\u0EB7\u0EAD\u0E81\u0E97\u0EB5\u0EA1\u0E81\u0EC8\u0EAD\u0E99"]}],match_time:[{required:!0,message:["\u0E81\u0EB0\u0EA5\u0EB8\u0E99\u0EB2\u0EC0\u0EA5\u0EB7\u0EAD\u0E81\u0EA7\u0EB1\u0E99\u0E97\u0EB5\u0E81\u0EC8\u0EAD\u0E99"]}],match_end_activity_time:[{required:!0,message:["\u0E81\u0EB0\u0EA5\u0EB8\u0E99\u0EB2\u0EC0\u0EA5\u0EB7\u0EAD\u0E81\u0EA7\u0EB1\u0E99\u0E97\u0EB5\u0E81\u0EC8\u0EAD\u0E99"]}]}}),v={labelCol:{span:4},wrapperCol:{span:14}},n=g(null);async function c(){e.form.team_a=null,e.form.team_b=null,e.form.match_time=null,e.form.match_end_activity_time=null,e.form.is_enable=null}async function E(a){if(!e.isEdit)try{await u(e.form)&&(s({title:"\u0E9A\u0EB1\u0E99\u0E97\u0EB6\u0E81\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94",description:"\u0E9A\u0EB1\u0E99\u0E97\u0EB6\u0E81\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94\u0EC1\u0EA5\u0EC9\u0EA7",position:"topRight"}),r.push({name:"match.index"}).catch(()=>{}),await c())}catch(t){e.isLoading=!1,e.isServerError=!0,e.messageError=Object.values(t.response.data.errors).join("<br> -"),o({title:"\u0EC0\u0E81\u0EB5\u0E94\u0E82\u0ECD\u0EC9\u0E9C\u0EB4\u0E94\u0E9E\u0EB2\u0E94...",description:"\u0E81\u0EB0\u0EA5\u0EB8\u0E99\u0EB2\u0E81\u0EA7\u0E94\u0EAA\u0EAD\u0E9A\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99",position:"topRight"})}if(e.isEdit)try{await d(a,e.form)&&(s({title:"\u0EAD\u0EB1\u0E9A\u0EC0\u0E94\u0E94\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94",description:"\u0EAD\u0EB1\u0E9A\u0EC0\u0E94\u0E94\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94\u0EC1\u0EA5\u0EC9\u0EA7...",position:"topRight"}),await c(),r.push({name:"match.index"}).catch(()=>{}))}catch(t){console.log(t),e.isServerError=!0,e.messageError=Object.values(t.response.data.errors).join("<br/>  -"),o({title:"\u0EC0\u0E81\u0EB5\u0E94\u0E82\u0ECD\u0EC9\u0E9C\u0EB4\u0E94\u0E9E\u0EB2\u0E94...",description:"\u0E81\u0EB0\u0EA5\u0EB8\u0E99\u0EB2\u0E81\u0EA7\u0E94\u0EAA\u0EAD\u0E9A\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99",position:"topRight"})}}async function m(){try{const a=await l();a&&(e.matches=a.results.map(t=>({...t,match_time:i(t.match_time).format("YYYY-MM-DD HH:mm:ss"),match_end_activity_time:i(t.match_end_activity_time).format("YYYY-MM-DD HH:mm:ss")})))}catch{}}async function M(a){try{const t=await h(a);t&&(t.match_time=i(t.match_time),t.match_end_activity_time=i(t.match_end_activity_time),t.team_a=t.team_a.id,t.team_b=t.team_b.id,e.form.fromJSON(e.form,t))}catch(t){console.log(t)}}async function w(a){n.value.validate().then(()=>{E(a)})}async function Y(){await c(),e.isEdit=!1,r.push({name:"match.create"}).catch(()=>{})}function R(a){e.isEdit=!0,r.push({name:"match.edit",params:{id:a},query:{edit:"true"}}).catch(t=>{console.log(t)})}async function S(a){try{await _(a)&&s({title:"\u0EA5\u0EB6\u0E9A\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94...",description:"\u0EA5\u0EB6\u0E9A\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94\u0EC1\u0EA5\u0EC9\u0EA7",position:"topRight"}),await m()}catch(t){e.isLoading=!1,o({title:"\u0EC0\u0E81\u0EB5\u0E94\u0E82\u0ECD\u0EC9\u0E9C\u0EB4\u0E94\u0E9E\u0EB2\u0E94...",description:t.errors.join(`
`),position:"topRight"})}}const C={...y(e),onCreate:Y,onDelete:S,onEdit:R,refForm:n,handleSubmit:w,loadMatch:M,loadAllMatch:m,layout:v};export{C as M};
