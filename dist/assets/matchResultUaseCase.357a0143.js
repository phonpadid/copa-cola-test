import{S as a,B as h,r as d,b as f,t as p,v as r}from"./index.5d8a84cb.js";import{n as i,a as o}from"./message.f33fb752.js";const n="matcheresults/";async function _(t){return await a.dispatch("data-resources/listing",{options_request:t,method:"GET",actionUri:n})}async function g(t){return await a.dispatch("data-resources/listing",{method:"GET",actionUri:`matcheresults/${t}`})}function b(t){const e={_method:"post",formData:!0,actionUri:n,...t};return a.dispatch("data-resources/manage",e)}function y(t){const e={match:t.match,team_a_score:t.team_a_score,team_b_score:t.team_b_score,is_publish:t.is_publish},m={method:"put",formData:!1,actionUri:`matcheresults/${t.id}/`,...e};return a.dispatch("data-resources/manage",m)}function R(t){const e={method:"delete",actionUri:`matcheresults/${t}/`,formData:!1};return a.dispatch("data-resources/manage",e)}function E(){h.call(this),this.id=null,this.match=null,this.team_a_score=null,this.team_b_score=null,this.is_publish=!0,this.fromJSON=(t,e)=>{t.match=e.match,t.id=e.id,t.team_a_score=e.team_a_score,t.team_b_score=e.team_b_score,t.is_publish=e.is_publish}}const s=d({isEdit:!1,matchesResult:[],form:new E,messageError:{},isServerError:!1}),w={labelCol:{span:4},wrapperCol:{span:14}},u=f(null),M={match:[{required:!0,message:"\u0E81\u0EB0\u0EA5\u0EB8\u0E99\u0EB2\u0EC0\u0EA5\u0EB7\u0EAD\u0E81\u0EC1\u0EA1\u0EB1\u0E94\u0E81\u0EC8\u0EAD\u0E99"}],team_a_score:[{required:!0,message:"\u0E81\u0EB0\u0EA5\u0EB8\u0E99\u0EB2\u0EC0\u0EA5\u0EB7\u0EAD\u0E81score\u0E81\u0EC8\u0EAD\u0E99"}],team_b_score:[{required:!0,message:"\u0E81\u0EB0\u0EA5\u0EB8\u0E99\u0EB2\u0EC0\u0EA5\u0EB7\u0EAD\u0E81score\u0E81\u0EC8\u0EAD\u0E99"}]};async function c(){s.form.match=null,s.form.team_a_score=null,s.form.team_b_score=null,s.form.is_publish=!0}async function S(){if(!s.isEdit)try{await b(s.form)&&(i({title:"\u0E9A\u0EB1\u0E99\u0E97\u0EB6\u0E81\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94",description:"\u0E9A\u0EB1\u0E99\u0E97\u0EB6\u0E81\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94\u0EC1\u0EA5\u0EC9\u0EA7",position:"topRight"}),r.push({name:"matchresult.index"}).catch(()=>{}),await c())}catch(t){s.isLoading=!1,s.isServerError=!0,s.messageError=Object.values(t.response.data.errors).join("<br> -"),o({title:"\u0EC0\u0E81\u0EB5\u0E94\u0E82\u0ECD\u0EC9\u0E9C\u0EB4\u0E94\u0E9E\u0EB2\u0E94...",description:"\u0E81\u0EB0\u0EA5\u0EB8\u0E99\u0EB2\u0E81\u0EA7\u0E94\u0EAA\u0EAD\u0E9A\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99",position:"topRight"})}if(s.isEdit)try{await y(s.form)&&(i({title:"\u0EAD\u0EB1\u0E9A\u0EC0\u0E94\u0E94\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94",description:"\u0EAD\u0EB1\u0E9A\u0EC0\u0E94\u0E94\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94\u0EC1\u0EA5\u0EC9\u0EA7...",position:"topRight"}),r.push({name:"matchresult.index"}).catch(()=>{}),await c())}catch(t){console.log(t),s.isServerError=!0,o({title:"\u0EC0\u0E81\u0EB5\u0E94\u0E82\u0ECD\u0EC9\u0E9C\u0EB4\u0E94\u0E9E\u0EB2\u0E94...",description:"\u0E81\u0EB0\u0EA5\u0EB8\u0E99\u0EB2\u0E81\u0EA7\u0E94\u0EAA\u0EAD\u0E9A\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99",position:"topRight"})}}async function l(){try{const t=await _();t&&(s.matchesResult=t.results)}catch{}}async function v(t){try{const e=await g(t);e&&(e.match=e.id,s.form.fromJSON(s.form,e))}catch{}}async function U(){u.value.validate().then(()=>{S()})}async function B(){await c(),s.isEdit=!1,r.push({name:"matchresult.create"}).catch(()=>{})}function C(t){s.isEdit=!0,r.push({name:"matchresult.edit",params:{id:t},query:{edit:"true"}}).catch(e=>{console.log(e)})}async function D(t){try{await R(t)&&i({title:"\u0EA5\u0EB6\u0E9A\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94...",description:"\u0EA5\u0EB6\u0E9A\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94\u0EC1\u0EA5\u0EC9\u0EA7",position:"topRight"}),await l()}catch(e){s.isLoading=!1,o({title:"\u0EC0\u0E81\u0EB5\u0E94\u0E82\u0ECD\u0EC9\u0E9C\u0EB4\u0E94\u0E9E\u0EB2\u0E94...",description:e.errors.join(`
`),position:"topRight"})}}const O={...p(s),onCreate:B,onDelete:D,onEdit:C,refForm:u,handleSubmit:U,loadMatchResult:v,loadAllMatchResult:l,layout:w,rules:M};export{O as M};
