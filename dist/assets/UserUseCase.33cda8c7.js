import{S as s,r as m,U as p,b as f,t as h,v as a}from"./index.5d8a84cb.js";import{n as i,a as n}from"./message.f33fb752.js";const u="accounts/";async function g(t){return await s.dispatch("data-resources/listing",{options_request:t,method:"GET",actionUri:u})}async function y(t){return await s.dispatch("data-resources/listing",{method:"GET",actionUri:`accounts/${t}`})}function w(t){const r={name:t.name,email:t.email,phone:t.phone,password:t.password},o={_method:"post",formData:!1,actionUri:u,...r};return s.dispatch("data-resources/manage",o)}function E(t){const r={name:t.name,email:t.email,phone:t.phone,password:t.password},o={method:"put",formData:!1,actionUri:`accounts/${t.id}/`,...r};return s.dispatch("data-resources/manage",o)}function U(t){const r={method:"delete",actionUri:`accounts/${t}/`,formData:!1};return s.dispatch("data-resources/manage",r)}const e=m({isEdit:!1,user:[],form:new p,messageError:{},rules:{password:[{required:!0,message:["\u0E81\u0EB0\u0EA5\u0EB8\u0E99\u0EB2\u0E9B\u0EC9\u0EAD\u0E99\u0EA5\u0EB0\u0EAB\u0EB1\u0E94\u0E9C\u0EC8\u0EB2\u0E99"]}],email:[{required:!0,message:["\u0E81\u0EB0\u0EA5\u0EB8\u0E99\u0EB2\u0E9B\u0EC9\u0EAD\u0E99\u0EAD\u0EB5\u0EC0\u0EA1\u0EA7\u0E81\u0EC8\u0EAD\u0E99"]}],name:[{required:!0,message:["\u0E81\u0EB0\u0EA5\u0EB8\u0E99\u0EB2\u0E9B\u0EC9\u0EAD\u0E99\u0E8A\u0EB7\u0EC8\u0E81\u0EC8\u0EAD\u0E99"]}],phone:[{required:!0,message:["\u0E81\u0EB0\u0EA5\u0EB8\u0E99\u0EB2\u0E9B\u0EC9\u0EAD\u0E99\u0EC0\u0E9A\u0EB5\u0EC2\u0E97\u0E81\u0EC8\u0EAD\u0E99"],trigger:"blur"}]},isServerError:!1}),b={labelCol:{span:4},wrapperCol:{span:14}},d=f(null);async function c(){e.form.name=null,e.form.email=null,e.form.phone=null}async function v(){if(!e.isEdit)try{await w(e.form)&&(i({title:"\u0E9A\u0EB1\u0E99\u0E97\u0EB6\u0E81\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94",description:"\u0E9A\u0EB1\u0E99\u0E97\u0EB6\u0E81\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94\u0EC1\u0EA5\u0EC9\u0EA7",position:"topRight"}),a.push({name:"user.index"}).catch(()=>{}),await c())}catch(t){e.isLoading=!1,e.isServerError=!0,e.messageError=Object.values(t.response.data.errors).join("<br> -"),n({title:"\u0EC0\u0E81\u0EB5\u0E94\u0E82\u0ECD\u0EC9\u0E9C\u0EB4\u0E94\u0E9E\u0EB2\u0E94...",description:"\u0E81\u0EB0\u0EA5\u0EB8\u0E99\u0EB2\u0E81\u0EA7\u0E94\u0EAA\u0EAD\u0E9A\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99",position:"topRight"})}if(e.isEdit)try{await E(e.form)&&(i({title:"\u0EAD\u0EB1\u0E9A\u0EC0\u0E94\u0E94\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94",description:"\u0EAD\u0EB1\u0E9A\u0EC0\u0E94\u0E94\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94\u0EC1\u0EA5\u0EC9\u0EA7...",position:"topRight"}),a.push({name:"user.index"}).catch(()=>{}),await c())}catch(t){console.log(t),e.isServerError=!0,e.messageError=Object.values(t.response.data.errors).join("<br/>  -"),n({title:"\u0EC0\u0E81\u0EB5\u0E94\u0E82\u0ECD\u0EC9\u0E9C\u0EB4\u0E94\u0E9E\u0EB2\u0E94...",description:"\u0E81\u0EB0\u0EA5\u0EB8\u0E99\u0EB2\u0E81\u0EA7\u0E94\u0EAA\u0EAD\u0E9A\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99",position:"topRight"})}}async function l(){try{const t=await g();t&&(e.user=t.results)}catch{}}async function S(t){try{const r=await y(t);r&&e.form.fromJSON(e.form,r)}catch{}}async function R(){d.value.validate().then(()=>{v()})}async function j(){await c(),e.isEdit=!1,a.push({name:"user.create"}).catch(()=>{})}function C(t){e.isEdit=!0,a.push({name:"user.edit",params:{id:t},query:{edit:"true"}}).catch(r=>{console.log(r)})}async function D(t){try{await U(t)&&i({title:"\u0EA5\u0EB6\u0E9A\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94...",description:"\u0EA5\u0EB6\u0E9A\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94\u0EC1\u0EA5\u0EC9\u0EA7",position:"topRight"}),await l()}catch(r){e.isLoading=!1,n({title:"\u0EC0\u0E81\u0EB5\u0E94\u0E82\u0ECD\u0EC9\u0E9C\u0EB4\u0E94\u0E9E\u0EB2\u0E94...",description:r.errors.join(`
`),position:"topRight"})}}const F={...h(e),onCreate:j,onDelete:D,onEdit:C,refForm:d,handleSubmit:R,loadUser:S,loadAllUser:l,layout:b};export{F as U};
