import{S as s,B as p,r as m,b as u,t as h,v as i}from"./index.5d8a84cb.js";import{n,a as c}from"./message.f33fb752.js";const l="facebookposts/",b="https://graph.facebook.com/v13.0/me/posts";async function g(t){return await s.dispatch("data-resources/listing",{options_request:t,method:"GET",actionUri:l})}async function _(t){return await s.dispatch("data-resources/listing",{method:"GET",actionUri:`facebookposts/${t}`})}async function y(t){return await s.dispatch("data-resources/listing",{options_request:t,method:"GET",newUrlApi:b})}function E(t){const o={facebook_post_id:t.facebook_post_id,title:t.title,body:t.body,match:t.match,is_enable:t.is_enable},e={_method:"post",formData:!0,actionUri:l,...o};return s.dispatch("data-resources/manage",e)}function k(t){const o={facebook_post_id:t.facebook_post_id,title:t.title,body:t.body,match:t.match,is_enable:t.is_enable},e={method:"put",formData:!1,actionUri:`facebookposts/${t.id}/`,...o};return s.dispatch("data-resources/manage",e)}function A(t){const o={method:"delete",actionUri:`facebookposts/${t}/`,formData:!1};return s.dispatch("data-resources/manage",o)}function w(){p.call(this),this.facebook_post_id=null,this.title=null,this.body=null,this.match=null,this.is_enable=!1,this.fromJSON=(t,o)=>{t.facebook_post_id=o.facebook_post_id,t.title=o.title,t.body=o.body,t.match=o.match,t.is_enable=o.is_enable}}const a=m({isEdit:!1,postFacebook:[],form:new w,messageError:{},isServerError:!1}),F={labelCol:{span:4},wrapperCol:{span:14}},f=u(null);async function r(){a.form.facebook_post_id=null,a.form.title=null,a.form.body=null,a.form.match=null,a.form.is_enable=null}async function B(){if(!a.isEdit)try{await E(a.form)&&(n({title:"\u0E9A\u0EB1\u0E99\u0E97\u0EB6\u0E81\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94",description:"\u0E9A\u0EB1\u0E99\u0E97\u0EB6\u0E81\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94\u0EC1\u0EA5\u0EC9\u0EA7",position:"topRight"}),i.push({name:"manageposts.index"}).catch(()=>{}),await r())}catch{a.isLoading=!1,a.isServerError=!0,c({title:"\u0EC0\u0E81\u0EB5\u0E94\u0E82\u0ECD\u0EC9\u0E9C\u0EB4\u0E94\u0E9E\u0EB2\u0E94...",description:"\u0E81\u0EB0\u0EA5\u0EB8\u0E99\u0EB2\u0E81\u0EA7\u0E94\u0EAA\u0EAD\u0E9A\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99",position:"topRight"})}if(a.isEdit)try{await k(a.form)&&(n({title:"\u0EAD\u0EB1\u0E9A\u0EC0\u0E94\u0E94\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94",description:"\u0EAD\u0EB1\u0E9A\u0EC0\u0E94\u0E94\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94\u0EC1\u0EA5\u0EC9\u0EA7...",position:"topRight"}),await r(),i.push({name:"manageposts.index"}).catch(()=>{}))}catch(t){console.log(t),a.isServerError=!0,c({title:"\u0EC0\u0E81\u0EB5\u0E94\u0E82\u0ECD\u0EC9\u0E9C\u0EB4\u0E94\u0E9E\u0EB2\u0E94...",description:"\u0E81\u0EB0\u0EA5\u0EB8\u0E99\u0EB2\u0E81\u0EA7\u0E94\u0EAA\u0EAD\u0E9A\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99",position:"topRight"})}}async function d(){try{const t=await g();t&&(a.postFacebook=t.results)}catch{}}async function P(){await y({fields:"id,message,created_time,comments.limit(0).summary(true),attachments{type}",access_token:"EAAFLdEq08iYBO3FiadSDniOcU0B2ZAV4EKjZAZCzWA0om8xCcq1552xNDqhqsFZAAb3th1ArWf23ixPZBlQ73wvPnpCJmsGf9az0OFgE2nrB0RMHEHOii2lmbwnO2FAWYzLWDM0he00f4bd9thtnPZBKkiBLzzHBezIAHcnFpRBSu9xotjL74QC8hEOYV5AVEZD"})}async function U(t){try{const o=await _(t);o&&(o.match=o.id,a.form.fromJSON(a.form,o))}catch(o){console.log(o)}}async function O(){f.value.validate().then(()=>{B()})}async function L(){await r(),a.isEdit=!1,i.push({name:"manageposts.create"}).catch(()=>{})}function S(t){a.isEdit=!0,i.push({name:"manageposts.edit",params:{id:t},query:{edit:"true"}}).catch(o=>{console.log(o)})}async function D(t){try{await A(t)&&n({title:"\u0EA5\u0EB6\u0E9A\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94...",description:"\u0EA5\u0EB6\u0E9A\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94\u0EC1\u0EA5\u0EC9\u0EA7",position:"topRight"}),await d()}catch(o){a.isLoading=!1,c({title:"\u0EC0\u0E81\u0EB5\u0E94\u0E82\u0ECD\u0EC9\u0E9C\u0EB4\u0E94\u0E9E\u0EB2\u0E94...",description:o.errors.join(`
`),position:"topRight"})}}const C={...h(a),onCreate:L,onDelete:D,onEdit:S,refForm:f,handleSubmit:O,loadPost:U,loadAllPost:d,layout:F,onGetFacebookPost:P};export{C as M,y as g};
