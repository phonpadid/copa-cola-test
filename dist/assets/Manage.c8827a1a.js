import{_ as A}from"./UploadImage.0959a536.js";import{N as f}from"./validate.f5f1e6c0.js";import{B as F,r as _,a as I,o as J,c as V,b as o,w as n,e as u,f as g,g as D,h as E,i as T,n as z,j as L,d as c}from"./index.19f23562.js";function M(){F.call(this),this.id=null,this.name=null,this.description=null,this.type="activity",this.image_logo=null,this.fromJSON=l=>{this.id=l.id,this.name=l.name,this.description=l.description,this.type=l.type,this.image_logo=l.image_logo}}const W={class:"base-form"},$=u("span",null,[u("i",{class:"far fa-long-arrow-left"})],-1),K={__name:"Manage",setup(l){const h=D();E();const d=T(),v={xl:4,md:6,xs:8},b={xl:12,md:14,xs:16},p=_(null),a=I(new M),s=_(!1),y=e=>{p.value=e},x={name:[f("name")],description:[f("description")]},S=()=>{p.value.validate().then(e=>{N()}).catch(e=>{})};function w(e){a.image_logo=e[0].originFileObj}function N(){let e,t;e="variable",t="post";const i=JSON.parse(JSON.stringify(a));i.image_logo=a.image_logo,a.image_logo instanceof File||delete i.image_logo;const r={method:"post",_method:t,actionUri:e,formData:!0,...i};k(r)}function k(e){s.value=!0,h.dispatch("data-resources/manage",e).then(t=>{t.code===200&&(z({title:"Create Data Successfully",description:"data created !!",position:"topRight"}),s.value=!1,d.push({name:"activity.index"}).catch(()=>{}))}).catch(t=>{L({title:"Save failed",description:t.errors().join(`
`),position:"topRight"}),s.value=!1}).finally(()=>{s.value=!1})}function C(){d.push({name:"activity.index"}).catch(()=>{})}return(e,t)=>{const i=c("a-form-item"),r=A,B=c("a-input"),R=c("a-textarea"),U=c("a-button"),O=c("a-form");return J(),V("div",W,[o(O,{class:"mt-8",form:a,ref:y,model:a,rules:x,"label-col":v,"wrapper-col":b},{default:n(()=>[o(i,null,{default:n(()=>[u("h1",{onClick:C,class:"text-2xl tracking-wide font-black cursor-pointer text-blue-600"},[$,g(" Activity ")])]),_:1}),o(i,{label:" "},{default:n(()=>[o(r,{limit:1,"onUpdate:imageList":w,title:"image"})]),_:1}),o(i,{label:"name",name:"name"},{default:n(()=>[o(B,{value:a.name,"onUpdate:value":t[0]||(t[0]=m=>a.name=m),size:"large"},null,8,["value"])]),_:1}),o(i,{label:"description",name:"description"},{default:n(()=>[o(R,{value:a.description,"onUpdate:value":t[1]||(t[1]=m=>a.description=m),rows:6},null,8,["value"])]),_:1}),o(i,{label:" "},{default:n(()=>[o(U,{loading:s.value,class:"bg-blue-500",type:"primary",onClick:S},{default:n(()=>[g("save change")]),_:1},8,["loading"])]),_:1})]),_:1},8,["form","model"])])}}};export{K as default};
