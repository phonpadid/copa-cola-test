import{g as l,a as m,d,c as f,u}from"./TeamRepository.3d00bed3.js";import{B as p,r as g,b as h,t as E,v as a}from"./index.5d8a84cb.js";import{n as i,a as s}from"./message.f33fb752.js";function y(){p.call(this),this.id=null,this.name=null,this.code=null,this.fromJSON=(e,r)=>{e.id=r.id,e.name=r.name,e.code=r.code}}const t=g({isEdit:!1,teams:[],form:new y,messageError:{},isServerError:!1}),w={labelCol:{span:4},wrapperCol:{span:14}},n=h(null),v={name:[{required:!0,message:"\u0E81\u0EB0\u0EA5\u0EB9\u0E99\u0EB2\u0E9B\u0EC9\u0EAD\u0E99\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0E81\u0EC8\u0EAD\u0E99",trigger:"red"}],code:[{required:!0,message:"\u0E81\u0EB0\u0EA5\u0EB9\u0E99\u0EB2\u0E9B\u0EC9\u0EAD\u0E99\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0E81\u0EC8\u0EAD\u0E99",trigger:"red"}]};async function o(){t.form.name=null,t.form.code=null}async function T(){if(!t.isEdit)try{await f(t.form)&&(i({title:"\u0E9A\u0EB1\u0E99\u0E97\u0EB6\u0E81\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94",description:"\u0E9A\u0EB1\u0E99\u0E97\u0EB6\u0E81\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94\u0EC1\u0EA5\u0EC9\u0EA7",position:"topRight"}),a.push({name:"managetext.index"}).catch(()=>{}),await o())}catch(e){t.isLoading=!1,t.isServerError=!0,t.messageError=Object.values(e.response.data.errors).join("<br> -"),s({title:"\u0EC0\u0E81\u0EB5\u0E94\u0E82\u0ECD\u0EC9\u0E9C\u0EB4\u0E94\u0E9E\u0EB2\u0E94...",description:"\u0E81\u0EB0\u0EA5\u0EB8\u0E99\u0EB2\u0E81\u0EA7\u0E94\u0EAA\u0EAD\u0E9A\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99",position:"topRight"})}if(t.isEdit)try{await u(t.form)&&(i({title:"\u0EAD\u0EB1\u0E9A\u0EC0\u0E94\u0E94\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94",description:"\u0EAD\u0EB1\u0E9A\u0EC0\u0E94\u0E94\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94\u0EC1\u0EA5\u0EC9\u0EA7...",position:"topRight"}),await o(),a.push({name:"managetext.index"}).catch(()=>{}))}catch(e){console.log(e),t.isServerError=!0,t.messageError=Object.values(e.response.data.errors).join("<br/>  -"),s({title:"\u0EC0\u0E81\u0EB5\u0E94\u0E82\u0ECD\u0EC9\u0E9C\u0EB4\u0E94\u0E9E\u0EB2\u0E94...",description:"\u0E81\u0EB0\u0EA5\u0EB8\u0E99\u0EB2\u0E81\u0EA7\u0E94\u0EAA\u0EAD\u0E9A\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99",position:"topRight"})}}async function c(){try{const e=await l();e&&(t.teams=e.results)}catch{}}async function b(e){try{const r=await m(e);r&&t.form.fromJSON(t.form,r)}catch{}}async function x(){n.value.validate().then(()=>{T()})}async function R(){await o(),t.isEdit=!1,a.push({name:"managetext.create"}).catch(()=>{})}function S(e){t.isEdit=!0,a.push({name:"managetext.edit",params:{id:e},query:{edit:"true"}}).catch(r=>{console.log(r)})}async function B(e){try{await d(e)&&i({title:"\u0EA5\u0EB6\u0E9A\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94...",description:"\u0EA5\u0EB6\u0E9A\u0E82\u0ECD\u0EC9\u0EA1\u0EB9\u0E99\u0EAA\u0EB3\u0EC0\u0EA5\u0EB1\u0E94\u0EC1\u0EA5\u0EC9\u0EA7",position:"topRight"}),await c()}catch(r){t.isLoading=!1,s({title:"\u0EC0\u0E81\u0EB5\u0E94\u0E82\u0ECD\u0EC9\u0E9C\u0EB4\u0E94\u0E9E\u0EB2\u0E94...",description:r.errors.join(`
`),position:"topRight"})}}const C={...E(t),onCreate:R,onDelete:B,onEdit:S,refForm:n,handleSubmit:x,loadTeam:b,loadAllTeam:c,layout:w,rules:v};export{C as M};
